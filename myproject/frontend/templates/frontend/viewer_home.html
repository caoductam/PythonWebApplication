{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <title>TechCorp - Viewer</title>
    <link rel="stylesheet" href="{% static 'frontend/css/viewer_home.css' %}" />
  </head>
  <body>
    {% comment %}
    <h1>Viewer Home</h1>
    <h3 class="userId" id="userId"></h3>
    {% endcomment %}

    <!-- Menu Bar -->
    <nav class="navbar">
      <div class="navbar-left">
        <!-- Book icon IMG -->
        {# Bỏ comment nếu muốn dùng logo #}
        <span class="brand">TechCorp <b>Library</b></span>
      </div>
      <ul class="navbar-menu">
        <li class="active"><a href="#">Trang chủ</a></li>
        <li><a href="#">Tài nguyên</a></li>
        <li><a href="#">Danh mục</a></li>
        <li><a href="#">Giới thiệu</a></li>
      </ul>
      <div class="user-dropdown">
        <button class="user-btn" id="userDropdownBtn" type="button">
          <span class="login-icon">
            <svg width="22" height="22" fill="none" viewBox="0 0 24 24">
              <path
                d="M12 12c2.7 0 5-2.3 5-5s-2.3-5-5-5-5 2.3-5 5 2.3 5 5 5zm0 2c-3.3 0-10 1.7-10 5v3h20v-3c0-3.3-6.7-5-10-5z"
                fill="#374151"
              />
            </svg>
          </span>
          <span class="userId" id="userId"></span>
          <svg
            class="dropdown-arrow"
            width="18"
            height="18"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              d="M6 8l4 4 4-4"
              stroke="#2563eb"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        <div class="user-dropdown-menu" id="userDropdownMenu">
          <a href="#" class="dropdown-item" id="profileBtn"
            >Thông tin cá nhân</a
          >
          <a href="#" class="dropdown-item" id="changePasswordBtn"
            >Đổi mật khẩu</a
          >
          <a href="#" class="dropdown-item" id="logoutBtn">Đăng xuất</a>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-content">
        <h1>
          Thư Viện Tài Nguyên Số <span class="highlight">TechCorp Library</span>
        </h1>
        <p class="hero-desc">
          Khám phá kho tàng tài liệu, nghiên cứu và tài nguyên chất<br />
          lượng cao của TechCorp Library.
        </p>
        <div class="hero-stats">
          <div class="stat">
            <div class="stat-number documents">0</div>
            <div class="stat-label">Tài liệu</div>
          </div>
          <div class="stat">
            <div class="stat-number categories">0</div>
            <div class="stat-label">Danh mục</div>
          </div>
          <div class="stat">
            <div class="stat-number users">0</div>
            <div class="stat-label">Người dùng</div>
          </div>
        </div>
      </div>
    </section>

    <section class="search-section" id="search-section">
      <div class="search-header">
        <h2>Tìm kiếm tài liệu</h2>
        <p>Sử dụng bộ lọc để tìm chính xác tài liệu bạn cần</p>
      </div>
      <form class="search-form" autocomplete="off">
        <div class="search-input-wrapper">
          <span class="search-icon">
            <svg width="28" height="28" fill="none" viewBox="0 0 24 24">
              <circle cx="11" cy="11" r="7" stroke="#cfd8e3" stroke-width="2" />
              <path
                d="M20 20L17 17"
                stroke="#cfd8e3"
                stroke-width="2"
                stroke-linecap="round"
              />
            </svg>
          </span>
          <input
            type="text"
            id="search-input"
            placeholder="Tìm kiếm tài liệu, nghiên cứu..."
          />
        </div>
        <div class="search-filters">
          <select id="category-select">
            <option value="">Tất cả danh mục</option>
          </select>
          <select id="format-select">
            <option value="">Tất cả định dạng</option>
          </select>
          <button type="button" class="clear-btn">
            <span style="font-size: 1.1em; vertical-align: middle"
              >&#10006;</span
            >
            Xóa bộ lọc
          </button>
        </div>
      </form>
    </section>
    <section class="document-section" id="document-section">
      <div class="doc-toolbar">
        <div class="doc-count" id="doc-count"></div>
        <div class="doc-view-switch">
          <button
            class="view-btn active"
            id="grid-view-btn"
            title="Dạng lưới"
            type="button"
          >
            <span class="icon">
              <!-- Grid icon -->
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <rect
                  x="6"
                  y="6"
                  width="7"
                  height="7"
                  rx="2"
                  fill="currentColor"
                />
                <rect
                  x="19"
                  y="6"
                  width="7"
                  height="7"
                  rx="2"
                  fill="currentColor"
                />
                <rect
                  x="6"
                  y="19"
                  width="7"
                  height="7"
                  rx="2"
                  fill="currentColor"
                />
                <rect
                  x="19"
                  y="19"
                  width="7"
                  height="7"
                  rx="2"
                  fill="currentColor"
                />
              </svg>
            </span>
          </button>
          <button
            class="view-btn"
            id="list-view-btn"
            title="Dạng danh sách"
            type="button"
          >
            <span class="icon">
              <!-- List icon -->
              <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                <rect
                  x="9"
                  y="10"
                  width="14"
                  height="2.5"
                  rx="1.25"
                  fill="#111"
                />
                <rect
                  x="9"
                  y="15"
                  width="14"
                  height="2.5"
                  rx="1.25"
                  fill="#111"
                />
                <rect
                  x="9"
                  y="20"
                  width="14"
                  height="2.5"
                  rx="1.25"
                  fill="#111"
                />
              </svg>
            </span>
          </button>
        </div>
      </div>
      <div id="doc-list" class="doc-list grid-view"></div>
      <div class="doc-pagination" id="doc-pagination"></div>
    </section>

    <section class="category-section" id="category-section">
      <h2 class="category-title">Danh mục tài liệu</h2>
      <div class="category-grid" id="category-grid"></div>
    </section>

    <footer class="footer" id="footer">
      <div class="footer-container">
        <div class="footer-col about">
          <h3>TechCorp Library</h3>
          <p>
            Thư viện tài nguyên số hàng đầu, cung cấp truy cập nhanh chóng đến
            các tài liệu chất lượng cao.
          </p>
          <div class="footer-social">
            <span>Theo dõi chúng tôi</span>
            <div class="footer-social-icons">
              <a
                href="#"
                title="Facebook"
                class="footer-social-icon"
                aria-label="Facebook"
              >
                <svg width="24" height="24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#232b39" />
                  <path
                    d="M15.5 8.5h-2a.5.5 0 0 0-.5.5v2h2.5l-.5 2H13v6h-2v-6H9v-2h2v-1.5A2.5 2.5 0 0 1 13.5 7h2v1.5z"
                    fill="#fff"
                  />
                </svg>
              </a>
              <a
                href="#"
                title="Twitter"
                class="footer-social-icon"
                aria-label="Twitter"
              >
                <svg width="24" height="24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#232b39" />
                  <path
                    d="M18 9.5a3.5 3.5 0 0 1-1 .3 1.75 1.75 0 0 0 .8-1c-.3.2-.7.4-1 .5A1.75 1.75 0 0 0 12 10.5c0 .1 0 .2.02.3A5 5 0 0 1 7 8.5s-2 4 2.5 5.5c-.5.2-1 .2-1.5.1.4 1.2 1.5 2 2.8 2A5.5 5.5 0 0 1 6 17c6 3 12-2.5 12-7.5 0-.1 0-.2 0-.3A3.5 3.5 0 0 0 18 9.5z"
                    fill="#fff"
                  />
                </svg>
              </a>
              <a
                href="#"
                title="LinkedIn"
                class="footer-social-icon"
                aria-label="LinkedIn"
              >
                <svg width="24" height="24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#232b39" />
                  <path
                    d="M8 10h2v6H8v-6zm1-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm3 2h2v1h.03c.28-.53.97-1.09 2-1.09 2.14 0 2.53 1.41 2.53 3.25V16h-2v-2.5c0-.6-.01-1.37-.84-1.37-.84 0-.97.66-.97 1.33V16h-2v-6z"
                    fill="#fff"
                  />
                </svg>
              </a>
              <a
                href="#"
                title="Instagram"
                class="footer-social-icon"
                aria-label="Instagram"
              >
                <svg width="24" height="24" fill="none">
                  <circle cx="12" cy="12" r="12" fill="#232b39" />
                  <rect
                    x="7"
                    y="7"
                    width="10"
                    height="10"
                    rx="3"
                    stroke="#fff"
                    stroke-width="2"
                  />
                  <circle
                    cx="12"
                    cy="12"
                    r="2.5"
                    stroke="#fff"
                    stroke-width="2"
                  />
                  <circle cx="15.5" cy="8.5" r="1" fill="#fff" />
                </svg>
              </a>
            </div>
          </div>
        </div>
        <div class="footer-col">
          <h4>Liên kết nhanh</h4>
          <ul>
            <li><a href="#">Trang chủ</a></li>
            <li><a href="#document-section">Tài nguyên</a></li>
            <li><a href="#category-section">Danh mục</a></li>
            <li><a href="#footer">Giới thiệu</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>Hỗ trợ</h4>
          <ul>
            <li><a href="#">Trung tâm trợ giúp</a></li>
            <li><a href="#">Liên hệ</a></li>
            <li><a href="#">FAQ</a></li>
            <li><a href="#">Báo lỗi</a></li>
          </ul>
        </div>
      </div>
    </footer>

    <!-- Modal Thông tin cá nhân -->
    <div class="modal" id="profileModal">
      <div class="modal-content">
        <span class="modal-close" id="closeProfileModal">&times;</span>
        <h2>Thông tin cá nhân</h2>
        <form id="profileForm">
          <label for="profileUsername"><b>Username:</b></label>
          <input type="text" id="profileUsername" name="username" required />

          <label for="profileEmail"><b>Email:</b></label>
          <input type="email" id="profileEmail" name="email" />

          <label for="profileFullname"><b>Fullname:</b></label>
          <input type="text" id="profileFullname" name="fullname" />

          <div style="margin: 12px 0 0 0">
            <button type="submit" class="profile-save-btn">Lưu thay đổi</button>
          </div>
          <div
            id="profileMsg"
            style="margin-top: 10px; color: #e03a3a; min-height: 22px"
          ></div>
        </form>
      </div>
    </div>

    <!-- Modal Đổi mật khẩu -->
    <div class="modal" id="changePasswordModal">
      <div class="modal-content">
        <span class="modal-close" id="closeChangePasswordModal">&times;</span>
        <h2>Đổi mật khẩu</h2>
        <form id="changePasswordForm">
          <label>Mật khẩu hiện tại</label>
          <input type="password" id="currentPassword" required />
          <label>Mật khẩu mới</label>
          <input type="password" id="newPassword" required />
          <label>Nhập lại mật khẩu mới</label>
          <input type="password" id="confirmPassword" required />
          <button type="submit">Đổi mật khẩu</button>
          <div id="changePasswordMsg"></div>
        </form>
      </div>
    </div>
    <script src="{% static 'frontend/js/index.js' %}"></script>

    <script src="{% static 'frontend/js/viewer_home.js' %}"></script>
  </body>
</html>
